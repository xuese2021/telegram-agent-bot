# 永动机 - 统一流程，全覆盖

## daemon 四步循环

每 10 秒：
1. **有新任务吗？** → 没有 → sleep 继续
2. **Agent 在忙吗？**（`.agent_busy` 存在）→ 在忙 → 任务排队，继续
3. **唤起 Agent** → 开新会话，喂任务
4. **标记 Agent 忙**

---

## 情景 1：有项目在跑，人走开

Agent 在干 → `.agent_busy` 存在 → 新任务排队  
Agent 干完 → report_done 移除 `.agent_busy` → daemon 10 秒内检测到 → 唤起下一个  
✅ 不卡

---

## 情景 2：没项目跑，人在外面

Agent 空闲 → daemon 检测到新任务 → 唤起  
✅ 不卡

---

## 情景 3：出门前说「我要出门了」

Agent 进入 `wait_for_task` → 你发任务 → 直接干  
✅ 不卡（这条路照样保留）

---

## 全覆盖 ✅

无需 20 分钟检测，无需区分人在不在，统一处理。
